{"swagger":"2.0","info":{"version":"5","title":"DisplayDeck Friendly API"},"host":"localhost:2001","basePath":"/api","schemes":["http"],"securityDefinitions":{"BearerAuth":{"type":"apiKey","name":"Authorization","in":"header"}},"paths":{"/health":{"get":{"produces":["application/json"],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"value":{"type":"string"}}}}}}},"/auth/login":{"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/AuthService.TLoginRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AuthService.TAuthResponse"}}}}},"/auth/register":{"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/AuthService.TRegisterRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/AuthService.TAuthResponse"}}}}},"/organizations":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"value":{"type":"array","items":{"$ref":"#/definitions/uEntities.TOrganization"}}}}}}},"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/uEntities.TOrganization"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TOrganization"}}}}},"/organizations/{id}":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"id","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TOrganization"}},"404":{"description":"Not found"}}}},"/organizations/{OrganizationId}/subscription":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"OrganizationId","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"SubscriptionID":{"type":"integer"},"OrganizationID":{"type":"integer"},"PlanID":{"type":"integer"},"Status":{"type":"string"},"CurrentPeriodEnd":{"type":"string","format":"date-time"}}}}}}},"/organizations/{OrganizationId}/displays":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"OrganizationId","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"value":{"type":"array","items":{"$ref":"#/definitions/uEntities.TDisplay"}}}}}}},"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"OrganizationId","required":true,"type":"integer"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/uEntities.TDisplay"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TDisplay"}}}}},"/organizations/{OrganizationId}/campaigns":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"OrganizationId","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"value":{"type":"array","items":{"$ref":"#/definitions/uEntities.TCampaign"}}}}}}},"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"OrganizationId","required":true,"type":"integer"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/uEntities.TCampaign"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TCampaign"}}}}},"/campaigns/{CampaignId}/items":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"CampaignId","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"value":{"type":"array","items":{"$ref":"#/definitions/uEntities.TCampaignItem"}}}}}}},"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"CampaignId","required":true,"type":"integer"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/uEntities.TCampaignItem"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TCampaignItem"}}}}},"/campaigns/{Id}":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"Id","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TCampaign"}},"404":{"description":"Not found"}}},"put":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"Id","required":true,"type":"integer"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/uEntities.TCampaign"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TCampaign"}}}},"delete":{"security":[{"BearerAuth":[]}],"responses":{"204":{"description":"No Content"}}}},"/campaign-items/{Id}":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"Id","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TCampaignItem"}},"404":{"description":"Not found"}}},"put":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"path","name":"Id","required":true,"type":"integer"},{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/uEntities.TCampaignItem"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TCampaignItem"}}}},"delete":{"security":[{"BearerAuth":[]}],"responses":{"204":{"description":"No Content"}}}},"/displays/{Id}":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"Id","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/uEntities.TDisplay"}},"404":{"description":"Not found"}}}},"/displays/{Id}/current-playing":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"Id","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"DisplayId":{"type":"integer"},"CampaignId":{"type":"integer"},"MediaFileId":{"type":"integer"},"PlaybackTimestamp":{"type":"string","format":"date-time"},"StartedAt":{"type":"string","format":"date-time"},"MediaFileName":{"type":"string"},"MediaFileType":{"type":"string"},"CampaignName":{"type":"string"}}}},"404":{"description":"No playback yet"}}}},"/displays/{Id}/set-primary":{"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"parameters":[{"in":"path","name":"Id","required":true,"type":"integer"},{"in":"body","name":"body","required":true,"schema":{"type":"object","properties":{"CampaignId":{"type":"integer"}},"required":["CampaignId"]}}],"responses":{"204":{"description":"No Content"}}}},"/displays/{DisplayId}/campaign-assignments":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"DisplayId","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"type":"object","properties":{"value":{"type":"array","items":{"$ref":"#/definitions/uEntities.TDisplayCampaign"}}}}}}}},"/media-files/upload-url":{"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/MediaFileService.TUploadUrlRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/MediaFileService.TUploadUrlResponse"}}}}},"/media-files/{MediaFileId}/download-url":{"get":{"security":[{"BearerAuth":[]}],"produces":["application/json"],"parameters":[{"in":"path","name":"MediaFileId","required":true,"type":"integer"}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/MediaFileService.TDownloadUrlResponse"}}}}},"/device/config":{"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/DeviceService.TDeviceConfigRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/DeviceService.TDeviceConfigResponse"}}}}},"/device/logs":{"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"produces":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"$ref":"#/definitions/DeviceService.TDeviceLogRequest"}}],"responses":{"200":{"description":"OK","schema":{"$ref":"#/definitions/DeviceService.TDeviceLogResponse"}}}}},"/playback-logs":{"post":{"security":[{"BearerAuth":[]}],"consumes":["application/json"],"parameters":[{"in":"body","name":"body","required":true,"schema":{"type":"object","properties":{"DisplayId":{"type":"integer"},"MediaFileId":{"type":"integer"},"CampaignId":{"type":"integer"},"PlaybackTimestamp":{"type":"string","format":"date-time"}},"required":["DisplayId","MediaFileId","CampaignId","PlaybackTimestamp"]}}],"responses":{"204":{"description":"No Content"}}}}},"definitions":{"uEntities.TOrganization":{"type":"object","properties":{"Id":{"type":"integer"},"Name":{"type":"string"},"CreatedAt":{"type":"string","format":"date-time"},"UpdatedAt":{"type":"string","format":"date-time"}}},"uEntities.TDisplay":{"type":"object","properties":{"Id":{"type":"integer"},"OrganizationId":{"type":"integer"},"Name":{"type":"string"},"Orientation":{"type":"string"},"LastSeen":{"type":"string","format":"date-time"},"CurrentStatus":{"type":"string"},"ProvisioningToken":{"type":"string"},"CreatedAt":{"type":"string","format":"date-time"},"UpdatedAt":{"type":"string","format":"date-time"}}},"uEntities.TDisplayCampaign":{"type":"object","properties":{"Id":{"type":"integer"},"DisplayId":{"type":"integer"},"CampaignId":{"type":"integer"},"IsPrimary":{"type":"boolean"}}},"uEntities.TCampaign":{"type":"object","properties":{"Id":{"type":"integer"},"OrganizationId":{"type":"integer"},"Name":{"type":"string"},"Orientation":{"type":"string"},"CreatedAt":{"type":"string","format":"date-time"},"UpdatedAt":{"type":"string","format":"date-time"}}},"uEntities.TCampaignItem":{"type":"object","properties":{"Id":{"type":"integer"},"CampaignId":{"type":"integer"},"MediaFileId":{"type":"integer"},"DisplayOrder":{"type":"integer"},"Duration":{"type":"integer"}}},"AuthService.TRegisterRequest":{"type":"object","properties":{"Email":{"type":"string"},"Password":{"type":"string"},"OrganizationName":{"type":"string"}}},"AuthService.TAuthResponse":{"type":"object","properties":{"Token":{"type":"string"},"User":{"$ref":"#/definitions/uEntities.TUser"},"Success":{"type":"boolean"},"Message":{"type":"string"}}},"uEntities.TUser":{"type":"object","properties":{"Id":{"type":"integer"},"OrganizationId":{"type":"integer"},"Email":{"type":"string"},"PasswordHash":{"type":"string"},"Role":{"type":"string"},"CreatedAt":{"type":"string","format":"date-time"},"UpdatedAt":{"type":"string","format":"date-time"}}},"AuthService.TLoginRequest":{"type":"object","properties":{"Email":{"type":"string"},"Password":{"type":"string"}}},"MediaFileService.TUploadUrlRequest":{"type":"object","properties":{"OrganizationId":{"type":"integer"},"FileName":{"type":"string"},"FileType":{"type":"string"},"ContentLength":{"type":"integer"}}},"MediaFileService.TUploadUrlResponse":{"type":"object","properties":{"MediaFileId":{"type":"integer"},"UploadUrl":{"type":"string"},"StorageKey":{"type":"string"},"Success":{"type":"boolean"},"Message":{"type":"string"}}},"MediaFileService.TDownloadUrlResponse":{"type":"object","properties":{"DownloadUrl":{"type":"string"},"Success":{"type":"boolean"},"Message":{"type":"string"}}}}